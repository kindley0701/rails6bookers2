<script async defer src="https://maps.googleapis.com/maps/api/js?v=3.exp&key=<%= ENV['GOOGLE_MAPS_API_KEY'] %>&callback=initMap"></script>
<script type="text/javascript">
  let map;

  function initMap() {
    // 位置情報を取得
    navigator.geolocation.getCurrentPosition(function (position) {
      // 座標の取得
      LatLng = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);

      // 取得した位置情報を中心に表示
      map = new google.maps.Map(document.getElementById('map'), {
        center: LatLng, // 地図の中心
        zoom: 15 // 
      });

      var contentString = '現在地';

      var infowindow = new google.maps.InfoWindow({
        content: contentString
      });

      var marker = new google.maps.Marker({//ピンの設定
                  position: LatLng, // ピンの位置
                  map: map, // 表示する地図情報
                  title: contentString //表示する題目
      });

      marker.addListener('click', function() {//ピンに対するアクションの設定
        infowindow.open(map, marker);//吹き出しを表示
      });

    });
  }
</script>
<style type="text/css">
  #map { height: 200px;
         width: 100%;
         margin: 10px;
  }
</style>

<div id="map"></div>