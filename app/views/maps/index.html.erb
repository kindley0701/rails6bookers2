<!--ここで読み込まないと他のページでもinitMapを呼び出してしまいエラーになる-->
<!--<script async defer src="https://maps.googleapis.com/maps/api/js?v=3.exp&key=<%#= ENV['GOOGLE_MAPS_API_KEY'] %>&callback=initMap"></script>-->
<script type="text/javascript" src="https://maps.google.com/maps/api/js?key=<%= ENV['GOOGLE_MAPS_API_KEY'] %>&libraries=places" charset="utf-8"></script>

<div class='container px-5 px-sm-0'>
  <div class='row'>
    <div class='col-md-3'>
      <h2>User info</h2>
      <%= render 'users/info', user: @user %>
      <h2 class="mt-3">New book</h2>
      <%= render 'books/form', book: @book %>
    </div>
    <div class='col-md-8 offset-md-1'>
      <div>
        <h2>Maps</h2>
        <div class="wrap">
          <ul id="tab-menu">
            <li><a href="#tab1" class="active">TAB1</a></li>
            <li><a href="#tab2" class="">TAB2</a></li>
            <li><a href="#tab3" class="">TAB3</a></li>
            <li><a href="#tab4" class="">TAB4</a></li>
          </ul>
          <div id="tab-contents" class="mb-2">
            <div id="tab1" class="tab">
              <%= render 'map', user: @user %>
            </div>
            <div id="tab2" class="tab">
              <%= render 'places' %>
            </div>
            <div id="tab3" class="tab">
              <p>TAB3のテキストが入ります。TAB3のテキストが入ります。TAB3のテキストが入ります。</p>
            </div>
            <div id="tab4" class="tab">
              <p>TAB4のテキストが入ります。TAB4のテキストが入ります。TAB4のテキストが入ります。TAB4のテキストが入ります。</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  $('#tab-contents .tab[id != "tab1"]').hide();

  $('#tab-menu a').on('click', function(event) {
    $("#tab-contents .tab").hide();
    $("#tab-menu .active").removeClass("active");
    $(this).addClass("active");
    $($(this).attr("href")).show();
    event.preventDefault();
  });
</script>